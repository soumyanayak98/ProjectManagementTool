<% tasks.includes(:feature).each do |task| %>
  <div class="card card-body p-1 mb-1">
    <div class="d-flex flex-row justify-content-between align-items-center">
      <strong>
        <%= truncate(task.description, length: 34) %>
      </strong>
      <%= link_to "view",[task.feature.project, task.feature, task], target: "_blank", class: "btn btn-primary btn-sm p-1" %>
    </div>
    <div class="d-flex flex-row justify-content-between mt-1 align-items-center">
      <div>Status: <em><%= task.status %></em></div>

      <% if !task.done && task.started %>  
        <%= form_with(url: done_project_feature_task_url(task.feature.project, task.feature, task), method: "PATCH") do |f| %>
          <%= f.check_box :done %>
          <%= f.label :done %>
          <%= f.submit "save", class: "btn btn-success btn-sm p-1" %> 
        <% end %>
      <% end %>
    </div>
  </div>
<% end %>

